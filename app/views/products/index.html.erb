<div class="container">
  <p id="notice"><%= notice %></p>
  <div class="row">
    <h4>Shopping Items</h4>
  <div>
    <%= link_to 'New Product', new_product_path, class: "btn waves-effect waves-light" %>
    <button id="getUpdate" class="btn waves-effect waves-light">Update</button>
    <%= link_to 'View Cart', cart_path(:bugs), class:"btn waves-light waves-effect" %>
  </div>  
    <table class="bordered highlight centered sortable">
      <thead>
        <tr>
          <th>Item Name</th>
          <th>Price</th>
          <th>Offer</th>
        </tr>
      </thead>
      <tbody>
      <% cache @products do %>  
        <% @products.each do |product|  %>
          <% cache product do %>
            <tr class="products-row" id=<%= product.id %>>
              <td><%= product.name %></td>
              <td><%= product.unit_price %></td>
              <% if product.special_qty %>
                <td><%= "#{product.special_qty} for #{product.special_price}" %></td>
              <% else %>
                <td>-</td>
              <% end %>
              <td><%= link_to 'Delete', product, class:"btn waves-light waves-effect", 
                               method: :delete, data: { confirm: 'Are you sure?' } %>
              </td>
              <td> 
                <%= button_to 'Add to Cart', line_items_path(product_id: product), 
                              class:"btn waves-light waves-effect" %>  
              </td>

            </tr>
          <% end %>
        <% end %>
      <% end %>
      </tbody>
      <script>
        selectProduct();
      </script>
    </table>
  </div>



  <script>
    dataUpdate();
  </script>
</div>
